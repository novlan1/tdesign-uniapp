import{c as e,w as s,e as a,f as t,i,g as r,o as n,h as l,j as o,k as d,t as c,l as u,m as f,p,S as h}from"./index-CvMgltbZ.js";import{t as g}from"./loading.B7gBx_gF.js";import{g as m,S as y,c as x,a as _,b,d as w,e as v,_ as L,w as S}from"./icon._Ezo7w2V.js";import{_ as $}from"./_plugin-vue_export-helper.BCo6x5W8.js";function k(e){return e&&"Array"===e.constructor}function P(e){return e&&"Object"===e.constructor}const z={addUnit:function(e){var s=m("^-?d+(.d+)?$");if(null!=e)return s.test(""+e)?e+"px":e},isString:function(e){return e&&"String"===e.constructor},isArray:k,isObject:P,isBoolean:function(e){return"boolean"==typeof e},isNoEmptyObj:function(e){return P(e)&&"{}"!==JSON.stringify(e)},includes:function(e,s){if(!e||!k(e))return!1;for(var a=0,t=e.length;a<t;a++)if(e[a]===s)return!0;return!1},cls:function(e,s){for(var a=[e],t=0,i=s.length;t<i;t++){var r=s[t];if(r&&"Array"===r.constructor){var n=s[t][0];s[t][1]&&a.push(e+"--"+n)}else"string"!=typeof r&&"number"!=typeof r||r&&a.push(e+"--"+r)}return a.join(" ")},getBadgeAriaLabel:function(e){var s=e.maxCount||99;if(e.dot)return"有新的消息";if("..."===e.count)return"有很多消息";if(isNaN(e.count))return e.count;var a="有"+s+"+条消息",t="有"+e.count+"条消息";return Number(e.count)>s?a:t},_style:function e(s){return k(s)?s.filter(function(e){return null!=e&&""!==e}).map(function(s){return k(s)?e(s):(t=";",(a=s).slice(-t.length)===t?a:a+t);var a,t}).join(" "):P(s)?(a=s,JSON.stringify(a).replace(m('{|}|"',"g"),"").split(",").map(function(e){return e.split(":")[0]})).filter(function(e){return null!=s[e]&&""!==s[e]}).map(function(e){return[(a=e,a.replace(m("[A-Z]","g"),function(e){return"-"+e}).toLowerCase()),[s[e]]].join(":");var a}).join(";"):s;var a},isValidIconName:function(e){return m("^[A-Za-z0-9-]+$").test(e)}},j=e=>{e.$wxs||(e.$wxs=[]),e.$wxs.push("_"),e.mixins||(e.mixins=[]),e.mixins.push({beforeCreate(){this._=z}})},{prefix:F}=x,D=`${F}-image`;let C=class extends y{constructor(){super(...arguments),this.externalClasses=[`${F}-class`,`${F}-class-load`,`${F}-class-image`,`${F}-class-error`],this.options={multipleSlots:!0},this.setData({prefix:F,isLoading:!0,isFailed:!1,innerStyle:"",classPrefix:D}),this.preSrc=void 0,this.observers={src(){this.preSrc!==this.src&&this.update()},"width, height"(e,s){this.calcSize(e,s)}},this.methods={onLoaded(e){const s=_.SDKVersion,{mode:a,tId:t}=this,i=b(s,"2.10.3")<0;if("heightFix"===a&&i){const{height:s,width:a}=e.detail;w(this,`#${t||"image"}`).then(e=>{const{height:t}=e,i=(t/s*a).toFixed(2);this.setData({innerStyle:`height: ${v(t)}; width: ${i}px;`})})}this.setData({isLoading:!1,isFailed:!1}),this.$emit("load",{detail:e.detail})},onLoadError(e){this.setData({isLoading:!1,isFailed:!0}),this.$emit("error",{detail:e.detail})},calcSize(e,s){let a="";e&&(a+=`width: ${v(e)};`),s&&(a+=`height: ${v(s)};`),this.setData({innerStyle:a})},update(){const{src:e}=this;this.preSrc=e,e?this.setData({isLoading:!0,isFailed:!1}):this.onLoadError({errMsg:"图片链接为空"})}}}setData(){}};C=L([S()],C);const I=C;j(I);const N=$({components:{BaseComp:$({components:{tLoading:g,tImage:$(I,[["render",function(p,h,g,m,y,x){const _=r("t-loading"),b=i,w=r("t-icon"),v=f;return n(),e(b,{style:t(p._._style([p.style,p.customStyle])),class:a("class "+p.prefix+"-class "+p.classPrefix)},{default:s(()=>[p.isLoading?(n(),e(b,{key:0,style:t(p._._style([p.innerStyle])),class:a(p.classPrefix+"__mask "+p.classPrefix+"--loading "+p.classPrefix+"--shape-"+p.shape),"aria-hidden":p.ariaHidden},{default:s(()=>["default"===p.loading?(n(),e(_,{key:0,theme:"dots",size:"44rpx",loading:"","inherit-color":"","t-class":"t-class-load","t-class-text":p.classPrefix+"--loading-text"},null,8,["t-class-text"])):""!==p.loading&&"slot"!==p.loading?(n(),e(b,{key:1,class:a(p.classPrefix+"__common "+p.prefix+"-class-load")},{default:s(()=>[d(c(p.loading),1)]),_:1},8,["class"])):o(p.$slots,"loading",{key:2},void 0,!0)]),_:3},8,["style","class","aria-hidden"])):p.isFailed?(n(),e(b,{key:1,style:t(p._._style([p.innerStyle])),class:a(p.classPrefix+"__mask "+p.classPrefix+"--failed "+p.classPrefix+"--shape-"+p.shape+" "+p.prefix+"-class-error"),"aria-hidden":p.ariaHidden},{default:s(()=>["default"===p.error?(n(),e(b,{key:0,style:{"font-size":"44rpx"},class:a(p.prefix+"-class-load")},{default:s(()=>[u(w,{name:"close","aria-role":"img","aria-label":"加载失败"})]),_:1},8,["class"])):p.error&&"slot"!==p.error?(n(),e(b,{key:1,class:a(p.classPrefix+"__common "+p.prefix+"-class-load")},{default:s(()=>[d(c(p.error),1)]),_:1},8,["class"])):o(p.$slots,"error",{key:2},void 0,!0)]),_:3},8,["style","class","aria-hidden"])):l("",!0),p.isFailed?l("",!0):(n(),e(v,{key:2,id:p.tId||"image",style:t(p._._style([p.innerStyle])),class:a(p.classPrefix+"__img "+p.classPrefix+"--shape-"+p.shape+" "+(p.isLoading?p.classPrefix+"--lazy":"")+" "+p.prefix+"-class-image"),src:p.src,mode:p.mode,webp:p.webp,"lazy-load":p.lazy,"show-menu-by-longpress":p.showMenuByLongpress,"aria-hidden":p.ariaHidden||p.isLoading||p.isFailed,"aria-label":p.ariaLabel,onLoad:p.onLoaded,onError:p.onLoadError},null,8,["id","style","class","src","mode","webp","lazy-load","show-menu-by-longpress","aria-hidden","aria-label","onLoad","onError"]))]),_:3},8,["style","class"])}],["__scopeId","data-v-cb4a1792"]])},data:()=>({skylineRender:""}),created(){},methods:{}},[["render",function(a,t,o,d,c,f){const p=r("t-loading"),h=r("t-image"),g=i;return n(),e(g,{class:"loading-container-flex"},{default:s(()=>[c.skylineRender?l("",!0):(n(),e(p,{key:0,theme:"circular",size:"40rpx",class:"wrapper"})),u(p,{theme:"spinner",size:"40rpx",class:"wrapper"}),u(p,{theme:"dots",size:"80rpx",class:"wrapper"}),u(p,{theme:"custom",class:"wrapper"},{indicator:s(()=>[u(h,{style:{width:"100%",height:"100%"},src:"https://tdesign.gtimg.com/mobile/demos/logo2.png"})]),_:1})]),_:1})}],["__scopeId","data-v-2a9555e5"]])},data:()=>({}),methods:{goToProgress(){p({url:"/pages/loading/loadingProgress/index"})}}},[["render",function(a,t,l,o,d,c){const f=r("t-navbar"),p=r("t-demo-header"),g=r("BaseComp"),m=r("t-demo"),y=r("horizontal"),x=r("vertical"),_=r("TextComp"),b=r("size"),w=r("duration"),v=i,L=h;return n(),e(v,{class:"skyline"},{default:s(()=>[u(f,{class:"demo-navbar",title:"Loading","left-arrow":""}),u(L,{"scroll-y":"",type:"list",class:"scroll-view"},{default:s(()=>[u(v,{class:"demo"},{default:s(()=>[u(p,{title:"Loading 加载",desc:"文用于表示页面或操作的加载状态，给予用户反馈的同时减缓等待的焦虑感，由一个或一组反馈动效组成。",notice:"渲染框架支持情况：Skyline、WebView"}),u(m,{title:"01 组件类型",desc:"纯图标",padding:""},{default:s(()=>[u(g)]),_:1}),u(m,{desc:"图标加文字横向",padding:""},{default:s(()=>[u(y)]),_:1}),u(m,{desc:"图标加文字竖向",padding:""},{default:s(()=>[u(x)]),_:1}),u(m,{desc:"纯文字",padding:""},{default:s(()=>[u(_)]),_:1}),u(m,{title:"02 组件尺寸",desc:"大尺寸",padding:""},{default:s(()=>[u(b)]),_:1}),u(m,{title:"03 加载速度",desc:"加载速度调整",padding:""},{default:s(()=>[u(w)]),_:1})]),_:1})]),_:1})]),_:1})}],["__scopeId","data-v-c8ca887d"]]);export{N as default};
