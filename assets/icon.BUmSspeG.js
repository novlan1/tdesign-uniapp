import{x as e,y as t,z as n,A as s,B as r,C as o,c as i,w as a,m as c,l,i as u,o as f,f as p,a as d,g as h,v as y}from"./index-B8Thrysu.js";import{_ as g}from"./_plugin-vue_export-helper.BCo6x5W8.js";function m(e,t,n,s){let r=arguments.length;var o,i=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,s);else for(let a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i}function b(e,t,n,s){return new(n||(n=Promise))((r,o)=>{function i(e){try{c(s.next(e))}catch(t){o(t)}}function a(e){try{c(s.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(e=>{e(t)})).then(i,a)}c((s=s.apply(e,t||[])).next())})}"function"==typeof SuppressedError&&SuppressedError;const v="WILL_SET_DATA_KEY";function x(e){const t=e.created;return{created(){var n;const s=this.$options[v],r=e._;console.log("[created.willSetData]",s),t&&t.call(this),s&&Object.keys(s).forEach(e=>{this[e]=s[e]}),console.log("commonWxs",r),r&&Object.keys(r).forEach(e=>{this._[e]=r[e]}),(null==(n=e.lifetimes)?void 0:n.ready)&&(console.log("doing attached"),e.lifetimes.ready.call(this))},data(){return{...this.$options[v]||{}}},mounted(){var t;console.log("doing mounted",this,e),(null==(t=e.lifetimes)?void 0:t.attached)&&(console.log("doing attached"),e.lifetimes.attached.call(this))},watch:S(e),...j(e)}}function j(e,t){if(!e.properties)return e;const{properties:n}=e,s={};return console.log("info.properties",e.properties),Object.keys(n).forEach(e=>{s[e]={type:n[e].type},n[e].value&&(s[e].default=n[e].value)}),console.log("this",t),{...e,props:s,methods:{...e.methods||{},...e._||{},setData(e){console.log("[doing setData]",e),Object.keys(e).forEach(t=>{this[t]=e[t]}),console.log("className",this.className,this)}}}}function O(e){console.log("this",this),this[v]=e}function S(e){if(!e.observers)return{};const{observers:t}=e;Object.keys(t).reduce((e,n)=>{const s=n.split(",").map(e=>e.trim());return{...e,[s]:t[n]}},{})}class k{constructor(){this.setData=O.bind(this),this.app=e()}}function _(e){return"boolean"==typeof e}const P=()=>t&&t()||n();let w;function E(e){return function(e,t){e=e.split("."),t=t.split(".");const n=Math.max(e.length,t.length);for(;e.length<n;)e.push("0");for(;t.length<n;)t.push("0");for(let s=0;s<n;s+=1){const n=parseInt(e[s],10),r=parseInt(t[s],10);if(n>r)return 1;if(n<r)return-1}return 0}((null==w&&(w=P()),w).SDKVersion,e)>=0}function $(){return E("2.10.3")}const C=["Created","Attached","Ready","Moved","Detached","Error"].map(e=>e.toLowerCase()),D=["properties","data","observers","methods","behaviors",...C,"relations","externalClasses","options","lifetimes","pageLifeTimes","definitionFilter"],A=function(e){console.log("toComponent.e",e);const{relations:t,behaviors:n=[],externalClasses:s=[]}=e;e.properties&&(Object.keys(e.properties).forEach(t=>{let n=e.properties[t];(function(e){return null!==e&&"object"==typeof e&&"[object Object]"===Object.prototype.toString.call(e)})(n)||(n={type:n}),e.properties[t]=n}),[{key:"ariaHidden",type:Boolean},{key:"ariaRole",type:String},{key:"ariaLabel",type:String},{key:"ariaLabelledby",type:String},{key:"ariaDescribedby",type:String},{key:"ariaBusy",type:Boolean}].forEach(({key:t,type:n})=>{e.properties[t]={type:n}}),e.properties.style={type:String,value:""},e.properties.customStyle={type:String,value:""}),e.methods||(e.methods={}),e.lifetimes||(e.lifetimes={});const r={};if(t){const e=(e,t)=>Behavior({created(){Object.defineProperty(this,`$${e}`,{get:()=>{const n=this.getRelationNodes(t)||[];return"parent"===e?n[0]:n}})}}),s={};Object.keys(t).forEach(n=>{const r=t[n],o=["parent","ancestor"].includes(r.type)?"parent":"children",i=e(o,n);s[o]=i}),n.push(...Object.keys(s).map(e=>s[e]))}if(e.behaviors=[...n],e.externalClasses=["class",...s],Object.getOwnPropertyNames(e).forEach(t=>{const n=Object.getOwnPropertyDescriptor(e,t);n&&(C.indexOf(t)<0&&"function"==typeof n.value?(Object.defineProperty(e.methods,t,n),delete e[t]):D.indexOf(t)<0?r[t]=n:C.indexOf(t)>=0&&(e.lifetimes[t]=e[t]))}),Object.keys(r).length){const t=e.lifetimes.created,n=e.lifetimes.attached,{controlledProps:s=[]}=e;e.lifetimes.created=function(...e){Object.defineProperties(this,r),t&&t.apply(this,e)},e.lifetimes.attached=function(...e){n&&n.apply(this,e),s.forEach(({key:e})=>{const t=`default${e.replace(/^(\w)/,(e,t)=>t.toUpperCase())}`,n=this;null==n[e]&&(this._selfControlled=!0),null==n[e]&&null!=n[t]&&this.setData({[e]:n[t]})})},e.methods._trigger=function(e,t,n){const r=s.find(t=>t.event===e);if(r){const{key:e}=r;this._selfControlled&&this.setData({[e]:t[e]})}this.$emit(e,{detail:t},n)}}return e},I=function(){return function(e){const t=new class extends e{};console.log("t",t),console.log("e",e),t.options=t.options||{},E("2.19.2")&&(t.options.virtualHost=!0);return A(t)}},N={prefix:"t"};function R(){var e=Array.prototype.slice.call(arguments);return e.unshift(RegExp),new(Function.prototype.bind.apply(RegExp,e))}function L(e){return e&&"Array"===e.constructor}function B(e){return e&&"Object"===e.constructor}const z={addUnit:function(e){var t=R("^-?d+(.d+)?$");if(null!=e)return t.test(""+e)?e+"px":e},isString:function(e){return e&&"String"===e.constructor},isArray:L,isObject:B,isBoolean:function(e){return"boolean"==typeof e},isNoEmptyObj:function(e){return B(e)&&"{}"!==JSON.stringify(e)},includes:function(e,t){if(!e||!L(e))return!1;for(var n=0,s=e.length;n<s;n++)if(e[n]===t)return!0;return!1},cls:function(e,t){for(var n=[e],s=0,r=t.length;s<r;s++){var o=t[s];if(o&&"Array"===o.constructor){var i=t[s][0];t[s][1]&&n.push(e+"--"+i)}else"string"!=typeof o&&"number"!=typeof o||o&&n.push(e+"--"+o)}return n.join(" ")},getBadgeAriaLabel:function(e){var t=e.maxCount||99;if(e.dot)return"有新的消息";if("..."===e.count)return"有很多消息";if(isNaN(e.count))return e.count;var n="有"+t+"+条消息",s="有"+e.count+"条消息";return Number(e.count)>t?n:s},_style:function e(t){return L(t)?t.filter(function(e){return null!=e&&""!==e}).map(function(t){return L(t)?e(t):(s=";",(n=t).slice(-s.length)===s?n:n+s);var n,s}).join(" "):B(t)?(n=t,JSON.stringify(n).replace(R('{|}|"',"g"),"").split(",").map(function(e){return e.split(":")[0]})).filter(function(e){return null!=t[e]&&""!==t[e]}).map(function(e){return[(n=e,n.replace(R("[A-Z]","g"),function(e){return"-"+e}).toLowerCase()),[t[e]]].join(":");var n}).join(";"):t;var n},isValidIconName:function(e){return R("^[A-Za-z0-9-]+$").test(e)}},T={color:{type:String,value:""},name:{type:String,value:"",required:!0},prefix:{type:String,value:""},size:{type:null}};s&&s()||n();const F=P();r&&r()||n();const H=function(e){return Object.keys(e).map(t=>`${t}: ${e[t]}`).join("; ")},V=function(e,t,n=!1){return new Promise((s,r)=>{o().in(e)[n?"selectAll":"select"](t).boundingClientRect(e=>{e?s(e):r(e)}).exec()})},J=function(e){if(!(e=>void 0===e)(t=e)&&!(e=>null===e)(t))return function(e){return/^\d+(\.\d+)?$/.test(e)}(e=String(e))?`${e}px`:e;var t},K=(e,t)=>e&&(_(e)&&t||(e=>"string"==typeof e)(e))?{name:_(e)?t:e}:function(e){const t=typeof e;return null!==e&&("object"===t||"function"===t)}(e)?e:null,{prefix:M}=N,U=`${M}-icon`;let W=class extends k{constructor(){super(...arguments),this.externalClasses=[`${M}-class`],this.properties=T,this._=z,this.setData({componentPrefix:M,classPrefix:U,isImage:!1,iconStyle:void 0}),this.observers={"name, color, size, style"(){this.setIconStyle()}},this.methods={onTap(e){this.$emit("click",{detail:e.detail})},setIconStyle(){const{name:e,color:t,size:n,classPrefix:s}=this,r=-1!==e.indexOf("/"),o=J(n),i=t?{color:t}:{},a=n?{"font-size":o}:{},c=Object.assign(Object.assign({},i),a);this.setData({isImage:r},()=>b(this,void 0,void 0,function*(){if(r){let e=o;e||(yield V(this,`.${s}`).then(t=>{e=J(null==t?void 0:t.height)}).catch(()=>{})),c.width=e,c.height=e}this.setData({iconStyle:`${H(c)}`})}))}}}setData(){}};W=x(m([I()],W));const Z=g(W,[["render",function(e,t,n,s,r,o){const g=y,m=u;return f(),i(m,{class:l((e.prefix?e.prefix:e.classPrefix)+" class "+e.componentPrefix+"-class"),style:c(e._._style([e.iconStyle,e.style,e.customStyle])),"aria-hidden":e.ariaHidden,"aria-label":e.ariaLabel,"aria-role":e.ariaRole,onClick:e.onTap},{default:a(()=>[e.isImage?(f(),i(m,{key:0,class:l(e.classPrefix+"--image")},{default:a(()=>[h(g,{src:e.name,mode:"aspectFit",class:l(e.classPrefix+"__image")},null,8,["src","class"])]),_:1},8,["class"])):p("",!0),e._.isValidIconName(e.name)&&!e.isImage?(f(),d("div",{key:1,class:l((e.prefix?e.prefix:e.classPrefix)+"-"+e.name+" "+e.classPrefix+"-base")},null,2)):p("",!0)]),_:1},8,["class","style","aria-hidden","aria-label","aria-role","onClick"])}],["__scopeId","data-v-305773c0"]]);export{k as S,z as _,$ as a,K as b,N as c,m as d,F as e,J as f,V as g,x as i,Z as t,I as w};
