import{x as e,y as t,z as n,A as s,B as r,C as o,c as i,w as a,m as l,l as c,i as u,o as p,f,a as d,g as h,v as y}from"./index-Ccz-JnLB.js";import{_ as m}from"./_plugin-vue_export-helper.BCo6x5W8.js";function g(e,t,n,s){let r=arguments.length;var o,i=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,s);else for(let a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i}function b(e,t,n,s){return new(n||(n=Promise))((r,o)=>{function i(e){try{l(s.next(e))}catch(t){o(t)}}function a(e){try{l(s.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(e=>{e(t)})).then(i,a)}l((s=s.apply(e,t||[])).next())})}"function"==typeof SuppressedError&&SuppressedError;const v={prefix:"t"};function x(e){return"boolean"==typeof e}const j=()=>e&&e()||t();n&&n()||t();const O=j();s&&s()||t();const S=function(e){return Object.keys(e).map(t=>`${t}: ${e[t]}`).join("; ")},k=function(e,t,n=!1){return new Promise((s,o)=>{r().in(e)[n?"selectAll":"select"](t).boundingClientRect(e=>{e?s(e):o(e)}).exec()})},C=function(e){if(!(e=>void 0===e)(t=e)&&!(e=>null===e)(t))return function(e){return/^\d+(\.\d+)?$/.test(e)}(e=String(e))?`${e}px`:e;var t},_=e=>e.replace(/-(\w)/g,(e,t)=>t.toUpperCase()),E=(e,t)=>e&&(x(e)&&t||(e=>"string"==typeof e)(e))?{name:x(e)?t:e}:function(e){const t=typeof e;return null!==e&&("object"===t||"function"===t)}(e)?e:null,P="WILL_SET_DATA_KEY";function w(e){const t=e.created;return{created(){var n;const s=this.$options[P],r=e._;console.log("[created.willSetData]",s),t&&t.call(this),s&&Object.keys(s).forEach(e=>{this[e]=s[e]}),console.log("commonWxs",r),r&&Object.keys(r).forEach(e=>{this._[e]=r[e]}),(null==(n=e.lifetimes)?void 0:n.ready)&&(console.log("doing attached"),e.lifetimes.ready.call(this))},data(){return{...this.$options[P]||{}}},mounted(){var t;console.log("doing mounted",this,e),(null==(t=e.lifetimes)?void 0:t.attached)&&(console.log("doing attached"),e.lifetimes.attached.call(this)),$.call(this,e)},watch:I(e),...D(e)}}function $(e){if(!e.observers)return;const t=this,{observers:n,properties:s}=e;Object.keys(n).forEach(e=>{const r=e.split(",").map(e=>e.trim()),o=r.find(n=>{var r;return t[n]!==(null==(r=s[e])?void 0:r.value)});if(console.log("isDiff",o,e,r.map(e=>t[e])),o){n[e].apply(t,r.map(e=>t[e]))}})}function D(e,t){if(!e.properties)return e;const{properties:n}=e,s={};return console.log("info.properties",e.properties),Object.keys(n).forEach(e=>{s[e]={type:n[e].type},n[e].value&&(s[e].default=n[e].value)}),console.log("this",t),{...e,props:{...s,...N(e)},methods:{...e.methods||{},...e._||{},setData(e){console.log("[doing setData]",e),Object.keys(e).forEach(t=>{this[t]=e[t]}),console.log("className",this.className,this)},parseExternalClass:R}}}function A(e){console.log("this",this),this[P]=e}function I(e){if(!e.observers)return{};const{observers:t}=e;Object.keys(t).reduce((e,n)=>{const s=n.split(",").map(e=>e.trim());return{...e,[s]:t[n]}},{})}function N(e){if(!e.externalClasses)return{};const{externalClasses:t}=e;return(Array.isArray(t)?t:[t]).reduce((e,t)=>({...e,[_(t)]:{type:String,default:""}}),{})}function R(e){console.log("getWrap.tClass",this["t-class"],this.tClass);return e.split(/\s+/).map(e=>e.trim()).map(e=>this.$options.externalClasses.includes(e)?this[_(e)]:e).join(" ")}class L{constructor(){this.setData=A.bind(this),this.app=o()}}let B;function z(e,t){e=e.split("."),t=t.split(".");const n=Math.max(e.length,t.length);for(;e.length<n;)e.push("0");for(;t.length<n;)t.push("0");for(let s=0;s<n;s+=1){const n=parseInt(e[s],10),r=parseInt(t[s],10);if(n>r)return 1;if(n<r)return-1}return 0}function T(e){return z((null==B&&(B=j()),B).SDKVersion,e)>=0}function F(){return T("2.10.3")}const H=["Created","Attached","Ready","Moved","Detached","Error"].map(e=>e.toLowerCase()),U=["properties","data","observers","methods","behaviors",...H,"relations","externalClasses","options","lifetimes","pageLifeTimes","definitionFilter"],V=function(e){console.log("toComponent.e",e);const{relations:t,behaviors:n=[],externalClasses:s=[]}=e;e.properties&&(Object.keys(e.properties).forEach(t=>{let n=e.properties[t];(function(e){return null!==e&&"object"==typeof e&&"[object Object]"===Object.prototype.toString.call(e)})(n)||(n={type:n}),e.properties[t]=n}),[{key:"ariaHidden",type:Boolean},{key:"ariaRole",type:String},{key:"ariaLabel",type:String},{key:"ariaLabelledby",type:String},{key:"ariaDescribedby",type:String},{key:"ariaBusy",type:Boolean}].forEach(({key:t,type:n})=>{e.properties[t]={type:n}}),e.properties.style={type:String,value:""},e.properties.customStyle={type:String,value:""}),e.methods||(e.methods={}),e.lifetimes||(e.lifetimes={});const r={};if(t){const e=(e,t)=>Behavior({created(){Object.defineProperty(this,`$${e}`,{get:()=>{const n=this.getRelationNodes(t)||[];return"parent"===e?n[0]:n}})}}),s={};Object.keys(t).forEach(n=>{const r=t[n],o=["parent","ancestor"].includes(r.type)?"parent":"children",i=e(o,n);s[o]=i}),n.push(...Object.keys(s).map(e=>s[e]))}if(e.behaviors=[...n],e.externalClasses=["class",...s],Object.getOwnPropertyNames(e).forEach(t=>{const n=Object.getOwnPropertyDescriptor(e,t);n&&(H.indexOf(t)<0&&"function"==typeof n.value?(Object.defineProperty(e.methods,t,n),delete e[t]):U.indexOf(t)<0?r[t]=n:H.indexOf(t)>=0&&(e.lifetimes[t]=e[t]))}),Object.keys(r).length){const t=e.lifetimes.created,n=e.lifetimes.attached,{controlledProps:s=[]}=e;e.lifetimes.created=function(...e){Object.defineProperties(this,r),t&&t.apply(this,e)},e.lifetimes.attached=function(...e){n&&n.apply(this,e),s.forEach(({key:e})=>{const t=`default${e.replace(/^(\w)/,(e,t)=>t.toUpperCase())}`,n=this;null==n[e]&&(this._selfControlled=!0),null==n[e]&&null!=n[t]&&this.setData({[e]:n[t]})})},e.methods._trigger=function(e,t,n){const r=s.find(t=>t.event===e);if(r){const{key:e}=r;this._selfControlled&&this.setData({[e]:t[e]})}this.$emit(e,{detail:t},n)}}return e},W=function(){return function(e){const t=new class extends e{};console.log("t",t),console.log("e",e),t.options=t.options||{},T("2.19.2")&&(t.options.virtualHost=!0);return V(t)}};function J(){var e=Array.prototype.slice.call(arguments);return e.unshift(RegExp),new(Function.prototype.bind.apply(RegExp,e))}function K(e){return e&&"Array"===e.constructor}function M(e){return e&&"Object"===e.constructor}const Z={addUnit:function(e){var t=J("^-?d+(.d+)?$");if(null!=e)return t.test(""+e)?e+"px":e},isString:function(e){return e&&"String"===e.constructor},isArray:K,isObject:M,isBoolean:function(e){return"boolean"==typeof e},isNoEmptyObj:function(e){return M(e)&&"{}"!==JSON.stringify(e)},includes:function(e,t){if(!e||!K(e))return!1;for(var n=0,s=e.length;n<s;n++)if(e[n]===t)return!0;return!1},cls:function(e,t){for(var n=[e],s=0,r=t.length;s<r;s++){var o=t[s];if(o&&"Array"===o.constructor){var i=t[s][0];t[s][1]&&n.push(e+"--"+i)}else"string"!=typeof o&&"number"!=typeof o||o&&n.push(e+"--"+o)}return n.join(" ")},getBadgeAriaLabel:function(e){var t=e.maxCount||99;if(e.dot)return"有新的消息";if("..."===e.count)return"有很多消息";if(isNaN(e.count))return e.count;var n="有"+t+"+条消息",s="有"+e.count+"条消息";return Number(e.count)>t?n:s},_style:function e(t){return K(t)?t.filter(function(e){return null!=e&&""!==e}).map(function(t){return K(t)?e(t):(s=";",(n=t).slice(-s.length)===s?n:n+s);var n,s}).join(" "):M(t)?(n=t,JSON.stringify(n).replace(J('{|}|"',"g"),"").split(",").map(function(e){return e.split(":")[0]})).filter(function(e){return null!=t[e]&&""!==t[e]}).map(function(e){return[(n=e,n.replace(J("[A-Z]","g"),function(e){return"-"+e}).toLowerCase()),[t[e]]].join(":");var n}).join(";"):t;var n},isValidIconName:function(e){return J("^[A-Za-z0-9-]+$").test(e)}},q={color:{type:String,value:""},name:{type:String,value:"",required:!0},prefix:{type:String,value:""},size:{type:null}},{prefix:Y}=v,G=`${Y}-icon`;let Q=class extends L{constructor(){super(...arguments),this.externalClasses=[`${Y}-class`],this.properties=q,this._=Z,this.setData({componentPrefix:Y,classPrefix:G,isImage:!1,iconStyle:void 0}),this.observers={"name, color, size, style"(){this.setIconStyle()}},this.methods={onTap(e){this.$emit("click",{detail:e.detail})},setIconStyle(){const{name:e,color:t,size:n,classPrefix:s}=this,r=-1!==e.indexOf("/"),o=C(n),i=t?{color:t}:{},a=n?{"font-size":o}:{},l=Object.assign(Object.assign({},i),a);this.setData({isImage:r},()=>b(this,void 0,void 0,function*(){if(r){let e=o;e||(yield k(this,`.${s}`).then(t=>{e=C(null==t?void 0:t.height)}).catch(()=>{})),l.width=e,l.height=e}this.setData({iconStyle:`${S(l)}`})}))}}}setData(){}};Q=w(g([W()],Q));const X=m(Q,[["render",function(e,t,n,s,r,o){const m=y,g=u;return p(),i(g,{class:c(e.parseExternalClass((e.prefix?e.prefix:e.classPrefix)+" class "+e.componentPrefix+"-class")),style:l(e._._style([e.iconStyle,e.style,e.customStyle])),"aria-hidden":e.ariaHidden,"aria-label":e.ariaLabel,"aria-role":e.ariaRole,onClick:e.onTap},{default:a(()=>[e.isImage?(p(),i(g,{key:0,class:c(e.classPrefix+"--image")},{default:a(()=>[h(m,{src:e.name,mode:"aspectFit",class:c(e.classPrefix+"__image")},null,8,["src","class"])]),_:1},8,["class"])):f("",!0),e._.isValidIconName(e.name)&&!e.isImage?(p(),d("div",{key:1,class:c((e.prefix?e.prefix:e.classPrefix)+"-"+e.name+" "+e.classPrefix+"-base")},null,2)):f("",!0)]),_:1},8,["class","style","aria-hidden","aria-label","aria-role","onClick"])}],["__scopeId","data-v-6d5ef3cf"]]);export{L as S,Z as _,F as a,E as b,v as c,g as d,O as e,z as f,k as g,C as h,w as i,X as t,W as w};
