import{g as e,c as s,w as t,n as a,h as i,i as r,j as n,o,k as l,l as c,f as d,t as u,a as f,b as h,m as p,S as g}from"./index-Ckd-SSkI.js";import{g as m,i as y,a as x,b as _,c as b,d as $,e as v,w,S,f as L,h as P,_ as k,j as z,t as j}from"./loading.CaLKHaT8.js";_();const D=m();b();const I=function(e){return Object.keys(e).map(s=>`${s}: ${e[s]}`).join("; ")},C=function(s,t,a=!1){return new Promise((a,i)=>{(e().in(s).n?"selectAll":"select"(t)).boundingClientRect(e=>{e?a(e):i(e)}).exec()})},F=function(e){if(y(e))return e=String(e),x(e)?`${e}px`:e};function O(e){return e&&"Array"===e.constructor}function A(e){return e&&"Object"===e.constructor}const N={addUnit:function(e){var s=$("^-?d+(.d+)?$");if(null!=e)return s.test(""+e)?e+"px":e},isString:function(e){return e&&"String"===e.constructor},isArray:O,isObject:A,isBoolean:function(e){return"boolean"==typeof e},isNoEmptyObj:function(e){return A(e)&&"{}"!==JSON.stringify(e)},includes:function(e,s){if(!e||!O(e))return!1;for(var t=0,a=e.length;t<a;t++)if(e[t]===s)return!0;return!1},cls:function(e,s){for(var t=[e],a=0,i=s.length;a<i;a++){var r=s[a];if(r&&"Array"===r.constructor){var n=s[a][0];s[a][1]&&t.push(e+"--"+n)}else"string"!=typeof r&&"number"!=typeof r||r&&t.push(e+"--"+r)}return t.join(" ")},getBadgeAriaLabel:function(e){var s=e.maxCount||99;if(e.dot)return"有新的消息";if("..."===e.count)return"有很多消息";if(isNaN(e.count))return e.count;var t="有"+s+"+条消息",a="有"+e.count+"条消息";return Number(e.count)>s?t:a},_style:function e(s){return O(s)?s.filter(function(e){return null!=e&&""!==e}).map(function(s){return O(s)?e(s):(a=";",(t=s).slice(-a.length)===a?t:t+a);var t,a}).join(" "):A(s)?(t=s,JSON.stringify(t).replace($('{|}|"',"g"),"").split(",").map(function(e){return e.split(":")[0]})).filter(function(e){return null!=s[e]&&""!==s[e]}).map(function(e){return[(t=e,t.replace($("[A-Z]","g"),function(e){return"-"+e}).toLowerCase()),[s[e]]].join(":");var t}).join(";"):s;var t},isValidIconName:function(e){return $("^[A-Za-z0-9-]+$").test(e)}},E=e=>{e.$wxs||(e.$wxs=[]),e.$wxs.push("_"),e.mixins||(e.mixins=[]),e.mixins.push({beforeCreate(){this._=N}})},{prefix:B}=L,H=`${B}-icon`;let R=class extends S{constructor(){super(...arguments),this.externalClasses=[`${B}-class`],this.setData({componentPrefix:B,classPrefix:H,isImage:!1,iconStyle:void 0}),this.observers={"name, color, size, style"(){this.setIconStyle()}},this.methods={onTap(e){this.$emit("click",{detail:e.detail})},setIconStyle(){const{name:e,color:s,size:t,classPrefix:a}=this,i=-1!==e.indexOf("/"),r=F(t),n=s?{color:s}:{},o=t?{"font-size":r}:{},l=Object.assign(Object.assign({},n),o);this.setData({isImage:i},()=>P(this,void 0,void 0,function*(){if(i){let e=r;e||(yield C(this,`.${a}`).then(s=>{e=F(null==s?void 0:s.height)}).catch(()=>{})),l.width=e,l.height=e}this.setData({iconStyle:`${I(l)}`})}))}}}setData(){}};R=v([w()],R);E(R);const{prefix:T}=L,V=`${T}-image`;let J=class extends S{constructor(){super(...arguments),this.externalClasses=[`${T}-class`,`${T}-class-load`,`${T}-class-image`,`${T}-class-error`],this.options={multipleSlots:!0},this.setData({prefix:T,isLoading:!0,isFailed:!1,innerStyle:"",classPrefix:V}),this.preSrc=void 0,this.observers={src(){this.preSrc!==this.src&&this.update()},"width, height"(e,s){this.calcSize(e,s)}},this.methods={onLoaded(e){const s=D.SDKVersion,{mode:t,tId:a}=this,i=z(s,"2.10.3")<0;if("heightFix"===t&&i){const{height:s,width:t}=e.detail;C(this,`#${a||"image"}`).then(e=>{const{height:a}=e,i=(a/s*t).toFixed(2);this.setData({innerStyle:`height: ${F(a)}; width: ${i}px;`})})}this.setData({isLoading:!1,isFailed:!1}),this.$emit("load",{detail:e.detail})},onLoadError(e){this.setData({isLoading:!1,isFailed:!0}),this.$emit("error",{detail:e.detail})},calcSize(e,s){let t="";e&&(t+=`width: ${F(e)};`),s&&(t+=`height: ${F(s)};`),this.setData({innerStyle:t})},update(){const{src:e}=this;this.preSrc=e,e?this.setData({isLoading:!0,isFailed:!1}):this.onLoadError({errMsg:"图片链接为空"})}}}setData(){}};J=v([w()],J);const M=J;E(M);const Z=k({components:{BaseComp:k({components:{tLoading:j,tImage:k(M,[["render",function(e,p,g,m,y,x){const _=n("t-loading"),b=r,$=n("t-icon"),v=h;return o(),s(b,{style:i(e._._style([e.style,e.customStyle])),class:a("class "+e.prefix+"-class "+e.classPrefix)},{default:t(()=>[e.isLoading?(o(),s(b,{key:0,style:i(e._._style([e.innerStyle])),class:a(e.classPrefix+"__mask "+e.classPrefix+"--loading "+e.classPrefix+"--shape-"+e.shape),"aria-hidden":e.ariaHidden},{default:t(()=>["default"===e.loading?(o(),s(_,{key:0,theme:"dots",size:"44rpx",loading:"","inherit-color":"","t-class":"t-class-load","t-class-text":e.classPrefix+"--loading-text"},null,8,["t-class-text"])):""!==e.loading&&"slot"!==e.loading?(o(),s(b,{key:1,class:a(e.classPrefix+"__common "+e.prefix+"-class-load")},{default:t(()=>[d(u(e.loading),1)]),_:1},8,["class"])):c(e.$slots,"loading",{key:2},void 0,!0)]),_:3},8,["style","class","aria-hidden"])):e.isFailed?(o(),s(b,{key:1,style:i(e._._style([e.innerStyle])),class:a(e.classPrefix+"__mask "+e.classPrefix+"--failed "+e.classPrefix+"--shape-"+e.shape+" "+e.prefix+"-class-error"),"aria-hidden":e.ariaHidden},{default:t(()=>["default"===e.error?(o(),s(b,{key:0,style:{"font-size":"44rpx"},class:a(e.prefix+"-class-load")},{default:t(()=>[f($,{name:"close","aria-role":"img","aria-label":"加载失败"})]),_:1},8,["class"])):e.error&&"slot"!==e.error?(o(),s(b,{key:1,class:a(e.classPrefix+"__common "+e.prefix+"-class-load")},{default:t(()=>[d(u(e.error),1)]),_:1},8,["class"])):c(e.$slots,"error",{key:2},void 0,!0)]),_:3},8,["style","class","aria-hidden"])):l("",!0),e.isFailed?l("",!0):(o(),s(v,{key:2,id:e.tId||"image",style:i(e._._style([e.innerStyle])),class:a(e.classPrefix+"__img "+e.classPrefix+"--shape-"+e.shape+" "+(e.isLoading?e.classPrefix+"--lazy":"")+" "+e.prefix+"-class-image"),src:e.src,mode:e.mode,webp:e.webp,"lazy-load":e.lazy,"show-menu-by-longpress":e.showMenuByLongpress,"aria-hidden":e.ariaHidden||e.isLoading||e.isFailed,"aria-label":e.ariaLabel,onLoad:e.onLoaded,onError:e.onLoadError},null,8,["id","style","class","src","mode","webp","lazy-load","show-menu-by-longpress","aria-hidden","aria-label","onLoad","onError"]))]),_:3},8,["style","class"])}],["__scopeId","data-v-cb4a1792"]])},data:()=>({skylineRender:""}),created(){},methods:{}},[["render",function(e,a,i,c,d,u){const h=n("t-loading"),p=n("t-image"),g=r;return o(),s(g,{class:"loading-container-flex"},{default:t(()=>[d.skylineRender?l("",!0):(o(),s(h,{key:0,theme:"circular",size:"40rpx",class:"wrapper"})),f(h,{theme:"spinner",size:"40rpx",class:"wrapper"}),f(h,{theme:"dots",size:"80rpx",class:"wrapper"}),f(h,{theme:"custom",class:"wrapper"},{indicator:t(()=>[f(p,{style:{width:"100%",height:"100%"},src:"https://tdesign.gtimg.com/mobile/demos/logo2.png"})]),_:1})]),_:1})}],["__scopeId","data-v-2a9555e5"]])},data:()=>({}),methods:{goToProgress(){p({url:"/pages/loading/loadingProgress/index"})}}},[["render",function(e,a,i,l,c,d){const u=n("t-navbar"),h=n("t-demo-header"),p=n("BaseComp"),m=n("t-demo"),y=n("horizontal"),x=n("vertical"),_=n("TextComp"),b=n("size"),$=n("duration"),v=r,w=g;return o(),s(v,{class:"skyline"},{default:t(()=>[f(u,{class:"demo-navbar",title:"Loading","left-arrow":""}),f(w,{"scroll-y":"",type:"list",class:"scroll-view"},{default:t(()=>[f(v,{class:"demo"},{default:t(()=>[f(h,{title:"Loading 加载",desc:"文用于表示页面或操作的加载状态，给予用户反馈的同时减缓等待的焦虑感，由一个或一组反馈动效组成。",notice:"渲染框架支持情况：Skyline、WebView"}),f(m,{title:"01 组件类型",desc:"纯图标",padding:""},{default:t(()=>[f(p)]),_:1}),f(m,{desc:"图标加文字横向",padding:""},{default:t(()=>[f(y)]),_:1}),f(m,{desc:"图标加文字竖向",padding:""},{default:t(()=>[f(x)]),_:1}),f(m,{desc:"纯文字",padding:""},{default:t(()=>[f(_)]),_:1}),f(m,{title:"02 组件尺寸",desc:"大尺寸",padding:""},{default:t(()=>[f(b)]),_:1}),f(m,{title:"03 加载速度",desc:"加载速度调整",padding:""},{default:t(()=>[f($)]),_:1})]),_:1})]),_:1})]),_:1})}],["__scopeId","data-v-c8ca887d"]]);export{Z as default};
